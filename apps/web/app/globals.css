@import "tailwindcss";
@import "tw-animate-css";

/* ============================================
   Tailwind CSS v4 Theme Configuration
   Study Docs Platform - Dark + Lime Green
   ============================================ */

@custom-variant dark (&:is(.dark *));

@theme inline {
  /* Typography */
  --font-sans: "Inter", ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, sans-serif;
  --font-mono: "JetBrains Mono", "Fira Code", ui-monospace, monospace;

  /* Border Radius */
  --radius: 0.625rem;
  --radius-sm: calc(var(--radius) - 4px);
  --radius-md: calc(var(--radius) - 2px);
  --radius-lg: var(--radius);
  --radius-xl: calc(var(--radius) + 4px);
  --radius-2xl: calc(var(--radius) + 8px);

  /* Color tokens (initial = light; overridden in .dark) */
  --color-background: var(--theme-background);
  --color-foreground: var(--theme-foreground);
  --color-card: var(--theme-card);
  --color-card-foreground: var(--theme-card-foreground);
  --color-popover: var(--theme-popover);
  --color-popover-foreground: var(--theme-popover-foreground);
  --color-primary: var(--theme-primary);
  --color-primary-foreground: var(--theme-primary-foreground);
  --color-secondary: var(--theme-secondary);
  --color-secondary-foreground: var(--theme-secondary-foreground);
  --color-muted: var(--theme-muted);
  --color-muted-foreground: var(--theme-muted-foreground);
  --color-accent: var(--theme-accent);
  --color-accent-foreground: var(--theme-accent-foreground);
  --color-destructive: var(--theme-destructive);
  --color-destructive-foreground: var(--theme-destructive-foreground);
  --color-success: var(--theme-success);
  --color-success-foreground: var(--theme-success-foreground);
  --color-warning: var(--theme-warning);
  --color-warning-foreground: var(--theme-warning-foreground);
  --color-info: var(--theme-info);
  --color-info-foreground: var(--theme-info-foreground);
  --color-border: var(--theme-border);
  --color-input: var(--theme-input);
  --color-ring: var(--theme-ring);
  --color-chart-1: var(--theme-chart-1);
  --color-chart-2: var(--theme-chart-2);
  --color-chart-3: var(--theme-chart-3);
  --color-chart-4: var(--theme-chart-4);
  --color-chart-5: var(--theme-chart-5);
  --color-sidebar: var(--theme-sidebar);
  --color-sidebar-foreground: var(--theme-sidebar-foreground);
  --color-sidebar-primary: var(--theme-sidebar-primary);
  --color-sidebar-primary-foreground: var(--theme-sidebar-primary-foreground);
  --color-sidebar-accent: var(--theme-sidebar-accent);
  --color-sidebar-accent-foreground: var(--theme-sidebar-accent-foreground);
  --color-sidebar-border: var(--theme-sidebar-border);
  --color-sidebar-ring: var(--theme-sidebar-ring);
}

/* ====== Light theme (default) ====== */
:root {
  --theme-background: #ffffff;
  --theme-foreground: #09090b;
  --theme-card: #ffffff;
  --theme-card-foreground: #09090b;
  --theme-popover: #ffffff;
  --theme-popover-foreground: #09090b;
  --theme-primary: #01CC66;
  --theme-primary-foreground: #ffffff;
  --theme-secondary: #f4f4f5;
  --theme-secondary-foreground: #09090b;
  --theme-muted: #f4f4f5;
  --theme-muted-foreground: #71717a;
  --theme-accent: #f4f4f5;
  --theme-accent-foreground: #09090b;
  --theme-destructive: #ef4444;
  --theme-destructive-foreground: #fafafa;
  --theme-success: #22c55e;
  --theme-success-foreground: #0a0a0a;
  --theme-warning: #eab308;
  --theme-warning-foreground: #0a0a0a;
  --theme-info: #3b82f6;
  --theme-info-foreground: #fafafa;
  --theme-border: #e4e4e7;
  --theme-input: #e4e4e7;
  --theme-ring: #01CC66;
  --theme-chart-1: #01CC66;
  --theme-chart-2: #01FF80;
  --theme-chart-3: #00994D;
  --theme-chart-4: #33FFB3;
  --theme-chart-5: #007A3D;
  --theme-sidebar: #fafafa;
  --theme-sidebar-foreground: #52525b;
  --theme-sidebar-primary: #01CC66;
  --theme-sidebar-primary-foreground: #ffffff;
  --theme-sidebar-accent: #f4f4f5;
  --theme-sidebar-accent-foreground: #09090b;
  --theme-sidebar-border: #e4e4e7;
  --theme-sidebar-ring: #01CC66;
}

/* ====== Dark theme ====== */
.dark {
  --theme-background: #121629;
  --theme-foreground: #fafafa;
  --theme-card: #161a33;
  --theme-card-foreground: #fafafa;
  --theme-popover: #161a33;
  --theme-popover-foreground: #fafafa;
  --theme-primary: #01FF80;
  --theme-primary-foreground: #0a0a0a;
  --theme-secondary: #1a1d35;
  --theme-secondary-foreground: #fafafa;
  --theme-muted: #161a30;
  --theme-muted-foreground: #71717a;
  --theme-accent: #1a1d35;
  --theme-accent-foreground: #fafafa;
  --theme-destructive: #ef4444;
  --theme-destructive-foreground: #fafafa;
  --theme-success: #22c55e;
  --theme-success-foreground: #0a0a0a;
  --theme-warning: #eab308;
  --theme-warning-foreground: #0a0a0a;
  --theme-info: #3b82f6;
  --theme-info-foreground: #fafafa;
  --theme-border: #1e2140;
  --theme-input: #1e2140;
  --theme-ring: #01FF80;
  --theme-chart-1: #01FF80;
  --theme-chart-2: #01CC66;
  --theme-chart-3: #33FFB3;
  --theme-chart-4: #00994D;
  --theme-chart-5: #66FFD5;
  --theme-sidebar: #121629;
  --theme-sidebar-foreground: #a1a1aa;
  --theme-sidebar-primary: #01FF80;
  --theme-sidebar-primary-foreground: #0a0a0a;
  --theme-sidebar-accent: #1a1d35;
  --theme-sidebar-accent-foreground: #fafafa;
  --theme-sidebar-border: #1e2140;
  --theme-sidebar-ring: #01FF80;
}

/* ============================================
   Base Styles
   ============================================ */

@layer base {
  * {
    @apply border-border;
  }

  html {
    scroll-behavior: smooth;
  }

  body {
    @apply bg-background text-foreground;
    font-family: var(--font-sans);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  ::-webkit-scrollbar {
    width: 6px;
    height: 6px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: var(--color-border);
    border-radius: 9999px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: var(--color-muted-foreground);
  }
}

/* ============================================
   Legacy Component Styles (kept for backwards compat)
   ============================================ */

@layer components {
  .btn {
    @apply inline-flex items-center justify-center gap-2 rounded-md text-sm font-medium transition-colors cursor-pointer whitespace-nowrap select-none;
    padding: 0.5rem 1rem;
  }
  .btn:disabled { @apply opacity-50 pointer-events-none; }
  .btn-primary { @apply bg-primary text-primary-foreground hover:bg-primary/90; }
  .btn-secondary { @apply bg-secondary text-secondary-foreground hover:bg-secondary/80; }
  .btn-outline { @apply border border-border bg-transparent text-foreground hover:bg-accent; }
  .btn-ghost { @apply bg-transparent text-foreground hover:bg-accent; }
  .btn-danger { @apply bg-destructive text-destructive-foreground hover:bg-destructive/90; }
  .btn-sm { @apply text-xs px-3 py-1.5; }
  .btn-lg { @apply text-base px-6 py-3; }

  .input {
    @apply w-full rounded-md border border-input bg-background px-3 py-2 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 focus:ring-offset-background transition-colors;
  }
  .input-sm { @apply px-2.5 py-1.5 text-xs; }

  .card {
    @apply bg-card text-card-foreground border border-border rounded-xl p-4;
  }

  .badge {
    @apply inline-flex items-center px-2.5 py-0.5 text-xs font-medium rounded-full bg-secondary text-secondary-foreground;
  }
  .badge-outline { @apply bg-transparent border border-border; }
  .badge-success { @apply bg-success/10 text-success; }
  .badge-warning { @apply bg-warning/10 text-warning; }
  .badge-danger { @apply bg-destructive/10 text-destructive; }
  .badge-info { @apply bg-info/10 text-info; }

  .table { @apply w-full text-sm; }
  .table th { @apply text-left px-4 py-3 font-medium text-muted-foreground border-b border-border bg-muted/50; }
  .table td { @apply px-4 py-3 border-b border-border; }
  .table tbody tr:hover { @apply bg-muted/50; }
  .table tbody tr:last-child td { @apply border-b-0; }

  .checkbox {
    @apply w-4 h-4 rounded-sm border border-border bg-background cursor-pointer appearance-none transition-colors;
  }
  .checkbox:checked {
    @apply bg-primary border-primary;
    background-image: url("data:image/svg+xml,%3csvg viewBox='0 0 16 16' fill='black' xmlns='http://www.w3.org/2000/svg'%3e%3cpath d='M12.207 4.793a1 1 0 010 1.414l-5 5a1 1 0 01-1.414 0l-2-2a1 1 0 011.414-1.414L6.5 9.086l4.293-4.293a1 1 0 011.414 0z'/%3e%3c/svg%3e");
    background-size: 100%;
    background-position: center;
    background-repeat: no-repeat;
  }

  .dropdown-menu {
    @apply absolute right-0 top-full mt-1 min-w-[10rem] bg-popover border border-border rounded-lg shadow-lg z-50 p-1;
  }
  .dropdown-item {
    @apply flex items-center gap-2 w-full px-3 py-2 text-sm text-foreground rounded-md cursor-pointer transition-colors hover:bg-accent;
    background: none;
    border: none;
    text-align: left;
  }
  .dropdown-item-danger { @apply text-destructive; }
  .dropdown-divider { @apply h-px bg-border my-1; }

  .modal-overlay {
    @apply fixed inset-0 bg-black/60 backdrop-blur-sm z-[100] flex items-center justify-center;
  }
  .modal {
    @apply bg-card rounded-xl shadow-2xl w-full max-w-md mx-4 border border-border;
  }
  .modal-header { @apply p-5 border-b border-border; }
  .modal-body { @apply p-5; }
  .modal-footer { @apply p-5 border-t border-border flex justify-end gap-2; }

  .empty-state { @apply flex flex-col items-center justify-center py-16 text-center; }
  .empty-state-icon { @apply w-16 h-16 flex items-center justify-center bg-muted rounded-2xl mb-4; }

  .icon-btn {
    @apply inline-flex items-center justify-center rounded-lg p-2 text-muted-foreground transition-colors hover:bg-accent hover:text-accent-foreground cursor-pointer;
  }
}

/* ============================================
   Utilities
   ============================================ */

@layer utilities {
  .fade-in {
    animation: fade-in 0.3s ease-out;
  }

  @keyframes fade-in {
    from { opacity: 0; transform: translateY(4px); }
    to { opacity: 1; transform: translateY(0); }
  }

  .skeleton {
    @apply animate-pulse bg-muted rounded;
  }

  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .glow-lime {
    box-shadow: 0 0 20px rgb(1 255 128 / 0.15), 0 0 60px rgb(1 255 128 / 0.05);
  }

  .gradient-lime {
    background: linear-gradient(135deg, #01FF80 0%, #01CC66 100%);
  }
}
